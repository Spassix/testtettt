!function(){"use strict";const i={enabled:!1,duration:1e3,text:"Chargement...",animation:"spinner"};function d(){const e=localStorage.getItem("site_loadingscreen");let o=i;if(e)try{const n=JSON.parse(e);o={...i,...n}}catch(n){console.warn("Erreur parsing loadingscreen config:",n)}if(!o.enabled)return t(),void(document.body.style.overflow="auto");s(o);const a=Math.min(o.duration||1e3,3e3);setTimeout(()=>{t(),document.body.style.overflow="auto"},a),setTimeout(()=>{t(),document.body.style.overflow="auto"},5e3)}function s(e){let o=document.getElementById("loadingScreen");o||(o=document.createElement("div"),o.id="loadingScreen",o.className="loading-screen",document.body.appendChild(o));const a=e.background&&/\.(mp4|mov|webm|ogg|m4v|avi)$/i.test(e.background);let n="";n=a?`\n          <video class="video-bg" autoplay muted loop playsinline>\n            <source src="${e.background}" type="${function(e){return{mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",mov:"video/quicktime",m4v:"video/mp4",avi:"video/x-msvideo"}[e.split(".").pop().toLowerCase()]||"video/mp4"}(e.background)}">\n          </video>\n          <div class="loading-content">\n            ${e.logo?`<div class="loading-logo" style="background-image: url('${e.logo}');"></div>`:""}\n            ${e.text?`<div class="loading-text">${e.text}</div>`:""}\n            <div class="loading-animation">\n              ${l(e.animation||"spinner")}\n            </div>\n          </div>\n        `:`\n          <div class="loading-content">\n            ${e.logo?`<div class="loading-logo" style="background-image: url('${e.logo}');"></div>`:""}\n            ${e.text?`<div class="loading-text">${e.text}</div>`:""}\n            <div class="loading-animation">\n              ${l(e.animation||"spinner")}\n            </div>\n          </div>\n        `,o.innerHTML=n,e.bgColor&&o.style.setProperty("--loading-bg",e.bgColor),e.textColor&&o.style.setProperty("--loading-text",e.textColor),e.accentColor&&o.style.setProperty("--loading-accent",e.accentColor),e.background&&!a&&(o.classList.add("has-background"),o.style.setProperty("--loading-bg-media",`url('${e.background}')`)),o.classList.remove("hidden")}function t(){const e=document.getElementById("loadingScreen");e&&(e.classList.add("hidden"),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},500))}function l(e){switch(e){case"dots":return'<div class="loading-dots"><span></span><span></span><span></span></div>';case"bars":return'<div class="loading-bars"><span></span><span></span><span></span><span></span><span></span></div>';case"pulse":return'<div class="loading-pulse"></div>';default:return'<div class="loading-spinner"></div>'}}window.addEventListener("adminDataUpdated",e=>{if("loadingscreen"===e.detail.key){const o=e.detail.data;o.enabled?(s(o),setTimeout(()=>t(),o.duration||3e3)):t()}}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{setTimeout(d,100)}):setTimeout(d,100)}();
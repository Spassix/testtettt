!function(){"use strict";function initTelegramAdaptations(){const tg=window.Telegram?.WebApp;if(!(window.Telegram?.WebApp||window.location.search.includes("tgWebAppPlatform")||window.location.hash.includes("tgWebApp")||navigator.userAgent.includes("Telegram")||window.parent!==window&&document.referrer.includes("telegram")||tg))return;console.log("✅ Telegram WebApp détecté, initialisation en mode plein écran..."),tg&&(tg.ready(),tg.expand(),tg.setHeaderColor("#000000"),tg.setBackgroundColor("#000000"),tg.enableClosingConfirmation(),tg.enableHapticFeedback&&"function"==typeof tg.enableHapticFeedback&&tg.enableHapticFeedback(),console.log("✅ Mode plein écran activé, API Telegram configurée")),document.body.classList.add("telegram-webapp");const viewport=document.querySelector('meta[name="viewport"]');function setViewportHeight(){const vh=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${vh}px`),document.documentElement.style.height="100vh",document.documentElement.style.height=`${window.innerHeight}px`,document.body.style.height=`${window.innerHeight}px`,document.body.style.minHeight=`${window.innerHeight}px`,document.body.style.maxHeight=`${window.innerHeight}px`,document.body.style.overflow="hidden"}if(viewport&&viewport.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"),setViewportHeight(),window.addEventListener("resize",setViewportHeight),window.addEventListener("orientationchange",function(){setTimeout(setViewportHeight,100)}),tg&&(tg.onEvent("viewportChanged",function(){setViewportHeight()}),tg.viewportStableHeight)){const stableHeight=tg.viewportStableHeight;document.documentElement.style.setProperty("--vh",.01*stableHeight+"px"),document.body.style.height=`${stableHeight}px`}const cartModal=document.getElementById("cartModal");if(cartModal){const cartContent=cartModal.querySelector(".cart-content");cartContent&&(cartContent.style.height="100vh",cartContent.style.maxHeight="100vh",cartContent.style.borderRadius="0"),cartModal.querySelectorAll(".cart-panel").forEach(panel=>{if(!panel.classList.contains("hidden")){const header=cartModal.querySelector(".cart-header"),steps=cartModal.querySelector(".cart-steps"),footer=cartModal.querySelector(".cart-footer");let usedHeight=0;header&&(usedHeight+=header.offsetHeight),steps&&(usedHeight+=steps.offsetHeight),footer&&(usedHeight+=footer.offsetHeight);const availableHeight=window.innerHeight-usedHeight;panel.style.maxHeight=`${availableHeight}px`,panel.style.overflowY="auto",panel.style.overflowX="hidden"}})}const header=document.querySelector(".header");header&&(header.style.position="relative");const originalOpenCart=window.openCart;originalOpenCart&&(window.openCart=function(){originalOpenCart(),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100vh"});const cartClose=document.getElementById("cartClose"),cartOverlay=cartModal?.querySelector(".cart-overlay"),continueShopping=document.getElementById("continueShoppingBtn");function closeCartHandler(){document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height=""}if(cartClose&&cartClose.addEventListener("click",closeCartHandler),cartOverlay&&cartOverlay.addEventListener("click",closeCartHandler),continueShopping&&continueShopping.addEventListener("click",closeCartHandler),cartModal){const observer=new MutationObserver(function(mutations){cartModal.querySelectorAll(".cart-panel").forEach(panel=>{if(!panel.classList.contains("hidden")){const header=cartModal.querySelector(".cart-header"),steps=cartModal.querySelector(".cart-steps"),footer=cartModal.querySelector(".cart-footer");let usedHeight=0;header&&(usedHeight+=header.offsetHeight),steps&&(usedHeight+=steps.offsetHeight),footer&&(usedHeight+=footer.offsetHeight);const availableHeight=window.innerHeight-usedHeight;panel.style.maxHeight=`${availableHeight}px`}})});observer.observe(cartModal,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["class"]})}console.log("✅ Adaptations Telegram appliquées")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initTelegramAdaptations):initTelegramAdaptations(),setTimeout(initTelegramAdaptations,500)}();
!function(){"use strict";function setupRedirectButton(){const redirectBtn=document.getElementById("redirectBtn");if(!redirectBtn)return void setTimeout(setupRedirectButton,500);const newBtn=redirectBtn.cloneNode(!0);function getRedirectUrl(){try{const configStr=localStorage.getItem("site_config");if(configStr)return JSON.parse(configStr).redirectUrl||""}catch(e){console.error("Erreur lecture config:",e)}return""}function updateRedirectButtonVisibility(){const redirectBtn=document.getElementById("redirectBtn");if(!redirectBtn)return;const url=getRedirectUrl();url&&""!==url.trim()?redirectBtn.style.display="block":redirectBtn.style.display="none"}redirectBtn.parentNode.replaceChild(newBtn,redirectBtn);const btn=document.getElementById("redirectBtn");btn&&btn.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();const url=getRedirectUrl();url&&""!==url.trim()?window.open(url,"_blank","noopener,noreferrer"):alert("Aucune URL de redirection configurée")}),updateRedirectButtonVisibility(),window.addEventListener("adminDataUpdated",function(e){"config"===e.detail.key&&updateRedirectButtonVisibility()}),window.addEventListener("storage",function(e){"site_config"===e.key&&updateRedirectButtonVisibility()});let lastConfigTimestamp=null;setInterval(function(){try{const timestampStr=localStorage.getItem("site_config_timestamp");timestampStr&&timestampStr!==lastConfigTimestamp&&(lastConfigTimestamp=timestampStr,updateRedirectButtonVisibility())}catch(e){}},1e3),console.log("✅ Bouton de redirection configuré")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){setTimeout(setupRedirectButton,500)}):setTimeout(setupRedirectButton,500);const cartModal=document.getElementById("cartModal");cartModal&&new MutationObserver(function(mutations){mutations.forEach(function(mutation){"attributes"===mutation.type&&"class"===mutation.attributeName&&cartModal.classList.contains("active")&&setTimeout(setupRedirectButton,100)})}).observe(cartModal,{attributes:!0,attributeFilter:["class"]})}();
!function(){"use strict";function updateCartBadge(){const totalItems=(window.cart||[]).reduce((sum,item)=>sum+(item.qty||1),0),cartCountBadge=document.getElementById("cartCountBadge");cartCountBadge&&(totalItems>0?(cartCountBadge.textContent=totalItems>99?"99+":totalItems,cartCountBadge.style.display="inline-flex"):cartCountBadge.style.display="none")}let navigateTo=null;function init(){setTimeout(function(){const panierSection=document.getElementById("panier");if(!panierSection)return void setTimeout(init,100);const sections={accueil:document.getElementById("accueil"),boutique:document.getElementById("boutique"),panier:panierSection,avis:document.getElementById("avis"),contact:document.getElementById("contact")},navButtons=Array.from(document.querySelectorAll(".bottom-nav .bottom-nav-item"));navigateTo=function(page){console.log("Navigation vers:",page),Object.entries(sections).forEach(([key,section])=>{section&&(key===page?("panier"===key?(section.style.display="block",window.refreshCartUI&&setTimeout(()=>{window.refreshCartUI()},100)):"avis"===key?(section.style.display="block",window.loadReviews&&setTimeout(()=>{window.loadReviews()},100)):section.style.display="",console.log("Affichage de:",key)):section.style.display="none")}),navButtons.forEach(btn=>{btn.dataset.nav===page?btn.classList.add("active"):btn.classList.remove("active")}),window.scrollTo({top:0,behavior:"smooth"})},window.navigateToPage=navigateTo,navButtons.forEach(btn=>{btn.addEventListener("click",function(e){const page=this.dataset.nav;if(page&&navigateTo)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),console.log("Clic intercept√© sur:",page),navigateTo(page),!1},!0)}),window.openCart=function(){navigateTo&&navigateTo("panier")};const originalRefreshCartUI=window.refreshCartUI;window.refreshCartUI=originalRefreshCartUI?function(){originalRefreshCartUI(),updateCartBadge()}:function(){updateCartBadge()},updateCartBadge(),setInterval(function(){updateCartBadge()},1e3);const continueShoppingBtn=document.getElementById("continueShoppingBtn");if(continueShoppingBtn){const newBtn=continueShoppingBtn.cloneNode(!0);continueShoppingBtn.parentNode.replaceChild(newBtn,continueShoppingBtn),newBtn.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),navigateTo&&navigateTo("boutique")})}panierSection&&(panierSection.style.display="none")},300)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init()}();
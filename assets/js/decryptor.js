(()=>{class a{constructor(){this.secretKey="LaFabrique92_SecretKey_2024_UltraSecure!@#$%^&*()"}xorEncrypt(t,r){let e="";for(let c=0;c<t.length;c++)e+=String.fromCharCode(t.charCodeAt(c)^r.charCodeAt(c%r.length));return e}xorDecrypt(t,r){return this.xorEncrypt(t,r)}normalizePath(t){return t.startsWith("http")||t.startsWith("/")?t:(location.pathname.startsWith("/admin")?"/admin/":"/")+t.replace(/^\.\/?/,"")}async decryptFile(t){try{const r="string"==typeof t?JSON.parse(t):t;return this.xorDecrypt(r.encrypted,this.secretKey)}catch(r){throw console.error("Erreur de dÃ©chiffrement:",r),new Error("Impossible de dÃ©chiffrer le fichier")}}async loadEncryptedScript(t){const r=this.normalizePath(t);try{console.log(`ðŸ”“ Chargement et dÃ©chiffrement de: ${r}`);const e=await fetch(r,{cache:"no-cache"});if(!e.ok)throw new Error(`HTTP ${e.status} pour ${r}`);const c=await e.text();if(c.trim().startsWith("<!DOCTYPE")||c.trim().startsWith("<html"))throw new Error(`Contenu HTML reÃ§u au lieu d'un JSON pour ${r} (fichier manquant ?)`);const i=JSON.parse(c),n=await this.decryptFile(i),s=document.createElement("script");return s.textContent=n,document.head.appendChild(s),console.log(`âœ… Script dÃ©chiffrÃ© et chargÃ©: ${r}`),!0}catch(e){return console.error(`âŒ Erreur chargement ${r}:`,e),!1}}async loadEncryptedScripts(t){console.log("ðŸ” DÃ©but du chargement des scripts chiffrÃ©s...");const r=t.map(n=>this.loadEncryptedScript(n)),e=await Promise.allSettled(r),c=e.filter(n=>"fulfilled"===n.status&&n.value).length,i=t.length;return console.log(`ðŸ“Š Scripts chargÃ©s: ${c}/${i}`),e}}window.JSDecryptor=a,window.loadEncryptedScript=async function(o){return await(new a).loadEncryptedScript(o)},window.loadEncryptedScripts=async function(o){return await(new a).loadEncryptedScripts(o)}})();